<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Generate PWA Icons - Between Pages</title>
  <style>
    body {
      font-family: 'Courier New', Courier, monospace;
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
      background: #faf8f5;
      color: #3d3428;
    }
    h1 { color: #5c4d3d; margin-bottom: 10px; letter-spacing: 2px; }
    p { color: #8b7355; margin-bottom: 20px; }
    .preview-section {
      text-align: center;
      margin: 40px 0;
      padding: 40px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 12px rgba(92, 77, 61, 0.1);
    }
    .preview-section canvas {
      border-radius: 48px;
      box-shadow: 0 8px 32px rgba(92, 77, 61, 0.2);
    }
    .preview-label {
      margin-top: 16px;
      font-size: 14px;
      color: #8b7355;
    }
    .icons-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 16px;
      margin: 30px 0;
    }
    .icon-item {
      text-align: center;
      padding: 15px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(92, 77, 61, 0.1);
    }
    .icon-item canvas {
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(92, 77, 61, 0.15);
    }
    .icon-item p {
      margin: 10px 0 5px;
      font-size: 11px;
      color: #5c4d3d;
    }
    button {
      background: #5c4d3d;
      color: #faf8f5;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      font-family: inherit;
    }
    button:hover { background: #4a3e31; }
    .download-all {
      display: block;
      margin: 30px auto;
      padding: 14px 32px;
      font-size: 14px;
    }
    .instructions {
      background: white;
      padding: 20px;
      border-radius: 8px;
      margin-top: 30px;
      border: 1px solid #e8e4df;
    }
    .instructions h2 { color: #5c4d3d; font-size: 16px; letter-spacing: 1px; margin-bottom: 12px; }
    .instructions ol { padding-left: 20px; line-height: 1.8; color: #5c4d3d; }
    .instructions code {
      background: #f5f0ea;
      padding: 2px 6px;
      border-radius: 3px;
      font-size: 13px;
    }
  </style>
</head>
<body>
  <h1>generate icons</h1>
  <p>app icons using the "between pages" logo</p>

  <div class="preview-section">
    <canvas id="preview" width="256" height="256"></canvas>
    <p class="preview-label">256x256 preview</p>
  </div>

  <button class="download-all" onclick="downloadAll()">download all icons</button>

  <div class="icons-grid" id="icons-grid"></div>

  <div class="instructions">
    <h2>instructions</h2>
    <ol>
      <li>Click "download all icons" above</li>
      <li>Move all downloaded PNG files to: <code>icons/</code> folder</li>
      <li>Make sure filenames match exactly (icon-192.png, etc.)</li>
      <li>Delete this generate-icons.html file when done</li>
    </ol>
  </div>

  <script>
    // Exact colors from the app
    const colors = {
      background: '#faf8f5',    // App background cream
      leftSpine: '#8b7355',     // Left book spine brown
      rightSpine: '#a89078',    // Right book spine lighter brown
      accent: '#5c4d3d'         // App accent brown
    };

    const sizes = [72, 96, 128, 144, 152, 192, 384, 512];
    const maskableSizes = [192, 512];

    function drawIcon(ctx, size, isMaskable = false) {
      ctx.clearRect(0, 0, size, size);

      const padding = isMaskable ? size * 0.2 : 0;
      const s = size - padding * 2;
      const ox = padding;
      const oy = padding;

      // Background - warm cream (same as app)
      ctx.fillStyle = colors.background;
      if (isMaskable) {
        ctx.fillRect(0, 0, size, size);
      } else {
        roundRect(ctx, 0, 0, size, size, size * 0.22);
        ctx.fill();
      }

      // Calculate spine dimensions (proportional to the logo)
      // Original: 2px wide, 22px tall, 8px gap in a 24px wide container
      const centerX = ox + s / 2;
      const centerY = oy + s / 2;

      // Scale factor based on size
      const scale = s / 24; // Original logo container is ~24px

      const spineWidth = Math.max(2, 2.5 * scale);
      const spineHeight = s * 0.55;
      const gap = Math.max(4, 4 * scale);

      // Draw spines with gradient (matching the CSS gradient)
      // Left spine - #8b7355
      const leftX = centerX - gap / 2 - spineWidth;
      drawSpineWithGradient(ctx, leftX, centerY - spineHeight / 2, spineWidth, spineHeight, colors.leftSpine);

      // Right spine - #a89078
      const rightX = centerX + gap / 2;
      drawSpineWithGradient(ctx, rightX, centerY - spineHeight / 2, spineWidth, spineHeight, colors.rightSpine);
    }

    function drawSpineWithGradient(ctx, x, y, width, height, color) {
      // Create vertical gradient matching CSS: transparent -> color 20% -> color 80% -> transparent
      const gradient = ctx.createLinearGradient(x, y, x, y + height);
      gradient.addColorStop(0, 'rgba(0,0,0,0)');
      gradient.addColorStop(0.15, color);
      gradient.addColorStop(0.85, color);
      gradient.addColorStop(1, 'rgba(0,0,0,0)');

      ctx.fillStyle = gradient;
      roundRect(ctx, x, y, width, height, width * 0.3);
      ctx.fill();
    }

    function roundRect(ctx, x, y, width, height, radius) {
      ctx.beginPath();
      ctx.moveTo(x + radius, y);
      ctx.lineTo(x + width - radius, y);
      ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
      ctx.lineTo(x + width, y + height - radius);
      ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
      ctx.lineTo(x + radius, y + height);
      ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
      ctx.lineTo(x, y + radius);
      ctx.quadraticCurveTo(x, y, x + radius, y);
      ctx.closePath();
    }

    function createIconItem(size, isMaskable = false) {
      const div = document.createElement('div');
      div.className = 'icon-item';

      const canvas = document.createElement('canvas');
      const displaySize = Math.min(size, 80);
      canvas.width = size;
      canvas.height = size;
      canvas.style.width = displaySize + 'px';
      canvas.style.height = displaySize + 'px';
      canvas.dataset.size = size;
      canvas.dataset.maskable = isMaskable;

      const ctx = canvas.getContext('2d');
      drawIcon(ctx, size, isMaskable);

      const filename = isMaskable ? `icon-maskable-${size}.png` : `icon-${size}.png`;

      const label = document.createElement('p');
      label.textContent = isMaskable ? `${size} maskable` : `${size}x${size}`;

      const btn = document.createElement('button');
      btn.textContent = 'download';
      btn.onclick = () => downloadIcon(canvas, filename);

      div.appendChild(canvas);
      div.appendChild(label);
      div.appendChild(btn);

      return div;
    }

    function downloadIcon(canvas, filename) {
      const link = document.createElement('a');
      link.download = filename;
      link.href = canvas.toDataURL('image/png');
      link.click();
    }

    function downloadAll() {
      const canvases = document.querySelectorAll('.icons-grid canvas');
      let delay = 0;
      canvases.forEach(canvas => {
        setTimeout(() => {
          const size = canvas.dataset.size;
          const isMaskable = canvas.dataset.maskable === 'true';
          const filename = isMaskable ? `icon-maskable-${size}.png` : `icon-${size}.png`;
          downloadIcon(canvas, filename);
        }, delay);
        delay += 100;
      });
    }

    // Initialize
    const preview = document.getElementById('preview');
    drawIcon(preview.getContext('2d'), 256, false);

    const grid = document.getElementById('icons-grid');
    sizes.forEach(size => grid.appendChild(createIconItem(size, false)));
    maskableSizes.forEach(size => grid.appendChild(createIconItem(size, true)));
  </script>
</body>
</html>
